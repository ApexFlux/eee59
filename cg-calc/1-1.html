<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>University of Dhaka — EEE 1st Year 1st Semester CG Calculator</title>
  <style>
    :root{
      --bg:#0b0f14; --card:#0f1720; --muted:#9aa6b2; --accent:#7dd3fc; --glass: rgba(255,255,255,0.03);
      --success:#4ade80; --danger:#fb7185; --surface:#0b1220;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#07101a 0%, #08131a 100%);color:#e6eef6;min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:32px}
    .wrap{width:100%;max-width:980px}
    header{display:flex;flex-direction:column;align-items:flex-start;gap:6px;margin-bottom:22px;text-align:left}
    h1{font-size:22px;margin:0;color:#e6eef6}
    h2{font-size:16px;margin:0;color:var(--muted)}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.7);}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{padding:10px 8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.03);font-size:13px}
    th{color:var(--muted);font-weight:600}
    td small{display:block;color:var(--muted);font-size:12px}
    input[type="number"], select{border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;width:100%;min-width:120px}
    input[type="number"]{background:transparent;color:inherit;}
    select{background-color:#1a1f2a;color:#e6eef6;}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .stats{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
    .stat{background:var(--glass);padding:12px;border-radius:10px;min-width:160px}
    .stat h3{margin:0;font-size:18px}
    .stat p{margin:6px 0 0;color:var(--muted);font-size:13px}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:10px;color:inherit;cursor:pointer}
    button.primary{background:var(--accent);color:#022;border:0}
    footer{margin-top:12px;color:var(--muted);font-size:13px}

    @media (max-width:720px){th:nth-child(2),td:nth-child(2){display:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>University of Dhaka</h1>
      <h2>Department of Electrical and Electronic Engineering</h2>
      <h2>CG (Semester GPA) Calculator — 1st Year, 1st Semester</h2>
      <p class="lead">Fill grade or marks for each course. The calculator uses your provided credit values and the grading scale.</p>
    </header>

    <div class="card">
      <div style="overflow:auto">
        <table id="courseTable" aria-label="courses table">
          <thead>
            <tr>
              <th>Course Code</th>
              <th>Course Title</th>
              <th>Credits</th>
              <th>Marks (%)</th>
              <th>Letter Grade</th>
              <th>Grade Point</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows autogenerated by script -->
          </tbody>
        </table>
      </div>

      <div class="row">
        <div style="flex:1;min-width:220px">
          <div class="stats">
            <div class="stat">
              <h3 id="totalCredits">0.0</h3>
              <p>Total Credits</p>
            </div>
            <div class="stat">
              <h3 id="totalGradePoints">0.00</h3>
              <p>Total Grade Points (Σ credit × grade-point)</p>
            </div>
            <div class="stat">
              <h3 id="cgpa">0.00</h3>
              <p>Semester CG (GPA)</p>
            </div>
          </div>
        </div>

        <div style="min-width:220px;display:flex;flex-direction:column;gap:8px;align-items:flex-end">
          <div class="controls">
            <button id="calcBtn" class="primary">Calculate</button>
            <button id="resetBtn">Reset</button>
            <button id="exportCSV">Export CSV</button>
          </div>
          <div style="font-size:13px;color:var(--muted);text-align:right;max-width:320px">Tip: type marks (%) to auto-select the correct letter grade; or choose a letter grade directly.</div>
        </div>
      </div>

      <footer>
        <strong>Grade scale used:</strong>
        <div style="margin-top:6px;color:var(--muted);font-size:13px">
          A+ (≥80) = 4.00 · A (75–79.99) = 3.75 · A- (70–74.99) = 3.50 · B+ (65–69.99) = 3.25 · B (60–64.99) = 3.00 · B- (55–59.99) = 2.75 · C+ (50–54.99) = 2.50 · C (45–49.99) = 2.25 · D (40–44.99) = 2.00 · F (<40) = 0.00
        </div>
        <div style="margin-top:10px;font-size:12px;color:var(--muted)">Developed for the students of University of Dhaka, Department of Electrical and Electronic Engineering (EEE), 1st Year 1st Semester.</div>
      </footer>
    </div>
  </div>

<script>
// Courses & credits provided by you
const courses = [
  {code:'0713-EEE-1101', title:'Electrical Circuit Analysis', credits:3.0},
  {code:'0533-PHY-1103', title:'Electricity and Magnetism', credits:3.0},
  {code:'0541-MAT-1105', title:'Differential and Integral Calculus', credits:3.0},
  {code:'0541-MAT-1107', title:'Linear Algebra and Numerical Analysis', credits:3.0},
  {code:'0231-GED-1109', title:'English for Technical Communication', credits:3.0},
  {code:'0713-EEE-1102', title:'Electrical Circuit Analysis Laboratory', credits:1.5},
  {code:'0732-CIV-1112', title:'Computer Aided Engineering Drawing', credits:1.5}
];

// Grading table (marks -> letter -> grade point)
const gradeScale = [
  {letter:'A+', min:80, point:4.00},
  {letter:'A',  min:75, point:3.75},
  {letter:'A-', min:70, point:3.50},
  {letter:'B+', min:65, point:3.25},
  {letter:'B',  min:60, point:3.00},
  {letter:'B-', min:55, point:2.75},
  {letter:'C+', min:50, point:2.50},
  {letter:'C',  min:45, point:2.25},
  {letter:'D',  min:40, point:2.00},
  {letter:'F',  min:0,  point:0.00}
];

const letterOptions = gradeScale.map(g => g.letter);
const letterToPoint = {};
gradeScale.forEach(g => letterToPoint[g.letter] = g.point);

function createTable(){
  const tbody = document.querySelector('#courseTable tbody');
  tbody.innerHTML = '';
  courses.forEach((c, idx) =>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td><strong>${c.code}</strong><small>${c.title}</small></td>
      <td>${c.title}</td>
      <td>${c.credits.toFixed(1)}</td>
      <td><input type="number" min="0" max="100" step="0.01" class="marks" data-idx="${idx}" placeholder="e.g. 78.5"></td>
      <td>
        <select class="grade" data-idx="${idx}">
          <option value="">-- select --</option>
          ${letterOptions.map(l => `<option value="${l}">${l}</option>`).join('')}
        </select>
      </td>
      <td class="gp" data-idx="${idx}">-</td>
    `;
    tbody.appendChild(tr);
  })
}

function marksToLetter(m){
  if(m === '' || m === null || isNaN(m)) return '';
  const mm = parseFloat(m);
  for(const g of gradeScale){ if(mm >= g.min) return g.letter; }
  return 'F';
}

function compute(){
  let totalCredits = 0;
  let totalGradePoints = 0;
  document.querySelectorAll('#courseTable tbody tr').forEach((tr, i) =>{
    const credits = courses[i].credits;
    totalCredits += credits;

    const marksEl = tr.querySelector('input.marks');
    const sel = tr.querySelector('select.grade');
    const gpCell = tr.querySelector('.gp');

    const marksVal = marksEl.value.trim();
    let letter = sel.value;
    if(marksVal !== ''){
      const auto = marksToLetter(marksVal);
      if(auto) sel.value = auto;
      letter = sel.value;
    }

    const gp = (letter && letterToPoint[letter] !== undefined) ? letterToPoint[letter] : NaN;
    if(!isNaN(gp)){
      gpCell.textContent = gp.toFixed(2);
      totalGradePoints += gp * credits;
    } else {
      gpCell.textContent = '-';
    }
  });

  const cgpa = totalCredits > 0 ? (totalGradePoints / totalCredits) : 0;
  document.getElementById('totalCredits').textContent = totalCredits.toFixed(1);
  document.getElementById('totalGradePoints').textContent = totalGradePoints.toFixed(2);
  document.getElementById('cgpa').textContent = cgpa.toFixed(2);
}

function resetAll(){
  document.querySelectorAll('input.marks').forEach(i => i.value = '');
  document.querySelectorAll('select.grade').forEach(s => s.value = '');
  document.querySelectorAll('.gp').forEach(c => c.textContent = '-');
  compute();
}

function exportCSV(){
  const rows = [['Course Code','Course Title','Credits','Marks','Letter Grade','Grade Point']];
  document.querySelectorAll('#courseTable tbody tr').forEach((tr,i)=>{
    const code = courses[i].code;
    const title = courses[i].title;
    const credits = courses[i].credits;
    const marks = tr.querySelector('input.marks').value || '';
    const letter = tr.querySelector('select.grade').value || '';
    const gp = tr.querySelector('.gp').textContent || '';
    rows.push([code,title,credits,marks,letter,gp]);
  });
  const csv = rows.map(r => r.map(cell => '"'+String(cell).replace(/"/g,'""')+'"').join(',')).join('\n');
  const blob = new Blob([csv],{type:'text/csv'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'semester-cg.csv';
  document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
}

createTable();
compute();
document.getElementById('calcBtn').addEventListener('click', compute);
document.getElementById('resetBtn').addEventListener('click', resetAll);
document.getElementById('exportCSV').addEventListener('click', exportCSV);
document.addEventListener('input', (e)=>{
  if(e.target.matches('input.marks')){
    const tr = e.target.closest('tr');
    const sel = tr.querySelector('select.grade');
    const marksVal = e.target.value.trim();
    if(marksVal !== '') sel.value = marksToLetter(marksVal);
    compute();
  }
});
document.addEventListener('change', (e)=>{ if(e.target.matches('select.grade')) compute(); });
</script>
</body>
</html>
